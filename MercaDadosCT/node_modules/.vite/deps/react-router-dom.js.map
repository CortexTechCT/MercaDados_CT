{"version":3,"file":"react-router-dom.js","names":[],"sources":["../../react-router/dist/development/dom-export.mjs"],"sourcesContent":["/**\r\n * react-router v7.9.4\r\n *\r\n * Copyright (c) Remix Software Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE.md file in the root directory of this source tree.\r\n *\r\n * @license MIT\r\n */\r\n\"use client\";\r\nimport {\r\n  deserializeErrors,\r\n  getHydrationData\r\n} from \"./chunk-WY5IRSCW.mjs\";\r\nimport {\r\n  CRITICAL_CSS_DATA_ATTRIBUTE,\r\n  FrameworkContext,\r\n  RemixErrorBoundary,\r\n  RouterProvider,\r\n  createBrowserHistory,\r\n  createClientRoutes,\r\n  createClientRoutesWithHMRRevalidationOptOut,\r\n  createRouter,\r\n  decodeViaTurboStream,\r\n  getPatchRoutesOnNavigationFunction,\r\n  getTurboStreamSingleFetchDataStrategy,\r\n  hydrationRouteProperties,\r\n  invariant,\r\n  mapRouteProperties,\r\n  useFogOFWarDiscovery\r\n} from \"./chunk-OIYGIGL5.mjs\";\r\n\r\n// lib/dom-export/dom-router-provider.tsx\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nfunction RouterProvider2(props) {\r\n  return /* @__PURE__ */ React.createElement(RouterProvider, { flushSync: ReactDOM.flushSync, ...props });\r\n}\r\n\r\n// lib/dom-export/hydrated-router.tsx\r\nimport * as React2 from \"react\";\r\nvar ssrInfo = null;\r\nvar router = null;\r\nfunction initSsrInfo() {\r\n  if (!ssrInfo && window.__reactRouterContext && window.__reactRouterManifest && window.__reactRouterRouteModules) {\r\n    if (window.__reactRouterManifest.sri === true) {\r\n      const importMap = document.querySelector(\"script[rr-importmap]\");\r\n      if (importMap?.textContent) {\r\n        try {\r\n          window.__reactRouterManifest.sri = JSON.parse(\r\n            importMap.textContent\r\n          ).integrity;\r\n        } catch (err) {\r\n          console.error(\"Failed to parse import map\", err);\r\n        }\r\n      }\r\n    }\r\n    ssrInfo = {\r\n      context: window.__reactRouterContext,\r\n      manifest: window.__reactRouterManifest,\r\n      routeModules: window.__reactRouterRouteModules,\r\n      stateDecodingPromise: void 0,\r\n      router: void 0,\r\n      routerInitialized: false\r\n    };\r\n  }\r\n}\r\nfunction createHydratedRouter({\r\n  getContext\r\n}) {\r\n  initSsrInfo();\r\n  if (!ssrInfo) {\r\n    throw new Error(\r\n      \"You must be using the SSR features of React Router in order to skip passing a `router` prop to `<RouterProvider>`\"\r\n    );\r\n  }\r\n  let localSsrInfo = ssrInfo;\r\n  if (!ssrInfo.stateDecodingPromise) {\r\n    let stream = ssrInfo.context.stream;\r\n    invariant(stream, \"No stream found for single fetch decoding\");\r\n    ssrInfo.context.stream = void 0;\r\n    ssrInfo.stateDecodingPromise = decodeViaTurboStream(stream, window).then((value) => {\r\n      ssrInfo.context.state = value.value;\r\n      localSsrInfo.stateDecodingPromise.value = true;\r\n    }).catch((e) => {\r\n      localSsrInfo.stateDecodingPromise.error = e;\r\n    });\r\n  }\r\n  if (ssrInfo.stateDecodingPromise.error) {\r\n    throw ssrInfo.stateDecodingPromise.error;\r\n  }\r\n  if (!ssrInfo.stateDecodingPromise.value) {\r\n    throw ssrInfo.stateDecodingPromise;\r\n  }\r\n  let routes = createClientRoutes(\r\n    ssrInfo.manifest.routes,\r\n    ssrInfo.routeModules,\r\n    ssrInfo.context.state,\r\n    ssrInfo.context.ssr,\r\n    ssrInfo.context.isSpaMode\r\n  );\r\n  let hydrationData = void 0;\r\n  if (ssrInfo.context.isSpaMode) {\r\n    let { loaderData } = ssrInfo.context.state;\r\n    if (ssrInfo.manifest.routes.root?.hasLoader && loaderData && \"root\" in loaderData) {\r\n      hydrationData = {\r\n        loaderData: {\r\n          root: loaderData.root\r\n        }\r\n      };\r\n    }\r\n  } else {\r\n    hydrationData = getHydrationData({\r\n      state: ssrInfo.context.state,\r\n      routes,\r\n      getRouteInfo: (routeId) => ({\r\n        clientLoader: ssrInfo.routeModules[routeId]?.clientLoader,\r\n        hasLoader: ssrInfo.manifest.routes[routeId]?.hasLoader === true,\r\n        hasHydrateFallback: ssrInfo.routeModules[routeId]?.HydrateFallback != null\r\n      }),\r\n      location: window.location,\r\n      basename: window.__reactRouterContext?.basename,\r\n      isSpaMode: ssrInfo.context.isSpaMode\r\n    });\r\n    if (hydrationData && hydrationData.errors) {\r\n      hydrationData.errors = deserializeErrors(hydrationData.errors);\r\n    }\r\n  }\r\n  let router2 = createRouter({\r\n    routes,\r\n    history: createBrowserHistory(),\r\n    basename: ssrInfo.context.basename,\r\n    getContext,\r\n    hydrationData,\r\n    hydrationRouteProperties,\r\n    mapRouteProperties,\r\n    future: {\r\n      middleware: ssrInfo.context.future.v8_middleware\r\n    },\r\n    dataStrategy: getTurboStreamSingleFetchDataStrategy(\r\n      () => router2,\r\n      ssrInfo.manifest,\r\n      ssrInfo.routeModules,\r\n      ssrInfo.context.ssr,\r\n      ssrInfo.context.basename\r\n    ),\r\n    patchRoutesOnNavigation: getPatchRoutesOnNavigationFunction(\r\n      ssrInfo.manifest,\r\n      ssrInfo.routeModules,\r\n      ssrInfo.context.ssr,\r\n      ssrInfo.context.routeDiscovery,\r\n      ssrInfo.context.isSpaMode,\r\n      ssrInfo.context.basename\r\n    )\r\n  });\r\n  ssrInfo.router = router2;\r\n  if (router2.state.initialized) {\r\n    ssrInfo.routerInitialized = true;\r\n    router2.initialize();\r\n  }\r\n  router2.createRoutesForHMR = /* spacer so ts-ignore does not affect the right hand of the assignment */\r\n  createClientRoutesWithHMRRevalidationOptOut;\r\n  window.__reactRouterDataRouter = router2;\r\n  return router2;\r\n}\r\nfunction HydratedRouter(props) {\r\n  if (!router) {\r\n    router = createHydratedRouter({\r\n      getContext: props.getContext\r\n    });\r\n  }\r\n  let [criticalCss, setCriticalCss] = React2.useState(\r\n    process.env.NODE_ENV === \"development\" ? ssrInfo?.context.criticalCss : void 0\r\n  );\r\n  React2.useEffect(() => {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      setCriticalCss(void 0);\r\n    }\r\n  }, []);\r\n  React2.useEffect(() => {\r\n    if (process.env.NODE_ENV === \"development\" && criticalCss === void 0) {\r\n      document.querySelectorAll(`[${CRITICAL_CSS_DATA_ATTRIBUTE}]`).forEach((element) => element.remove());\r\n    }\r\n  }, [criticalCss]);\r\n  let [location, setLocation] = React2.useState(router.state.location);\r\n  React2.useLayoutEffect(() => {\r\n    if (ssrInfo && ssrInfo.router && !ssrInfo.routerInitialized) {\r\n      ssrInfo.routerInitialized = true;\r\n      ssrInfo.router.initialize();\r\n    }\r\n  }, []);\r\n  React2.useLayoutEffect(() => {\r\n    if (ssrInfo && ssrInfo.router) {\r\n      return ssrInfo.router.subscribe((newState) => {\r\n        if (newState.location !== location) {\r\n          setLocation(newState.location);\r\n        }\r\n      });\r\n    }\r\n  }, [location]);\r\n  invariant(ssrInfo, \"ssrInfo unavailable for HydratedRouter\");\r\n  useFogOFWarDiscovery(\r\n    router,\r\n    ssrInfo.manifest,\r\n    ssrInfo.routeModules,\r\n    ssrInfo.context.ssr,\r\n    ssrInfo.context.routeDiscovery,\r\n    ssrInfo.context.isSpaMode\r\n  );\r\n  return (\r\n    // This fragment is important to ensure we match the <ServerRouter> JSX\r\n    // structure so that useId values hydrate correctly\r\n    /* @__PURE__ */ React2.createElement(React2.Fragment, null, /* @__PURE__ */ React2.createElement(\r\n      FrameworkContext.Provider,\r\n      {\r\n        value: {\r\n          manifest: ssrInfo.manifest,\r\n          routeModules: ssrInfo.routeModules,\r\n          future: ssrInfo.context.future,\r\n          criticalCss,\r\n          ssr: ssrInfo.context.ssr,\r\n          isSpaMode: ssrInfo.context.isSpaMode,\r\n          routeDiscovery: ssrInfo.context.routeDiscovery\r\n        }\r\n      },\r\n      /* @__PURE__ */ React2.createElement(RemixErrorBoundary, { location }, /* @__PURE__ */ React2.createElement(\r\n        RouterProvider2,\r\n        {\r\n          router,\r\n          unstable_onError: props.unstable_onError\r\n        }\r\n      ))\r\n    ), /* @__PURE__ */ React2.createElement(React2.Fragment, null))\r\n  );\r\n}\r\nexport {\r\n  HydratedRouter,\r\n  RouterProvider2 as RouterProvider\r\n};\r\n"],"mappings":"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"}